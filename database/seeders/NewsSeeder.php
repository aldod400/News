<?php

namespace Database\Seeders;

use App\Models\News;
use App\Models\User;
use App\Models\Category;
use Illuminate\Database\Seeder;

class NewsSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // إنشاء مستخدم افتراضي إذا لم يكن موجوداً
        $user = User::first() ?? User::factory()->create([
            'name' => 'محرر الأخبار',
            'email' => 'editor@news.com',
        ]);

        $categories = Category::all();
        $images = [
            'maritime.jpg',
            'maritime.jpg',
            'maritime.jpg',
            'maritime.jpg',
            'maritime.jpg',
            'maritime.jpg'
        ];

        $newsData = [
            [
                'title' => 'تطورات جديدة في عالم التكنولوجيا',
                'content' => 'شهد عالم التكنولوجيا تطورات مهمة خلال الأسبوع الماضي، حيث أعلنت عدة شركات عن منتجات جديدة مبتكرة. تشمل هذه التطورات تقنيات الذكاء الاصطناعي والحوسبة الكمية. وقد أشار الخبراء إلى أن هذه التطورات ستغير من طبيعة العمل في المستقبل القريب.',
                'category' => 'تكنولوجيا',
                'status' => 'Accept'
            ],
            [
                'title' => 'منتخب كرة القدم يحقق فوزاً مهماً',
                'content' => 'حقق المنتخب الوطني لكرة القدم فوزاً مهماً في المباراة التي أقيمت أمس، بنتيجة 3-1. وجاء هذا الفوز ليعزز من موقف الفريق في التصفيات المؤهلة للبطولة القادمة. أشاد المدرب بأداء اللاعبين ووصفه بالمتميز.',
                'category' => 'رياضة',
                'status' => 'Accept'
            ],
            [
                'title' => 'نصائح مهمة للحفاظ على الصحة',
                'content' => 'قدم خبراء الصحة مجموعة من النصائح المهمة للحفاظ على الصحة العامة، تشمل ممارسة الرياضة بانتظام، تناول غذاء متوازن، والحصول على قسط كافٍ من النوم. كما أكدوا على أهمية الفحص الطبي الدوري.',
                'category' => 'صحة',
                'status' => 'Accept'
            ],
            [
                'title' => 'مؤشرات اقتصادية إيجابية للربع الحالي',
                'content' => 'أظهرت البيانات الاقتصادية الأخيرة مؤشرات إيجابية للربع الحالي، حيث سجل النمو الاقتصادي ارتفاعاً ملحوظاً. وأرجع المحللون هذا التحسن إلى تحسن الصادرات وزيادة الاستثمارات المحلية.',
                'category' => 'اقتصاد',
                'status' => 'Accept'
            ],
            [
                'title' => 'اكتشاف علمي جديد في مجال الطب',
                'content' => 'أعلن فريق من الباحثين عن اكتشاف علمي جديد قد يساهم في علاج أحد الأمراض المزمنة. وقد نُشرت نتائج البحث في إحدى المجلات العلمية المرموقة، ويتوقع أن يفتح هذا الاكتشاف آفاقاً جديدة في المجال الطبي.',
                'category' => 'علوم',
                'status' => 'Accept'
            ],
            [
                'title' => 'معرض فني جديد يستقطب الزوار',
                'content' => 'افتتح معرض فني جديد يضم أعمال فنانين محليين وعالميين، حيث يعرض أكثر من 100 لوحة فنية متنوعة. وقد لاقى المعرض إقبالاً كبيراً من محبي الفن والثقافة منذ افتتاحه.',
                'category' => 'ثقافة وفنون',
                'status' => 'Accept'
            ],
            [
                'title' => 'وجهة سياحية جديدة تفتح أبوابها',
                'content' => 'افتتحت وجهة سياحية جديدة تضم مرافق ترفيهية متنوعة ومطاعم عالمية. وتتميز هذه الوجهة بتصميمها المعماري الفريد والخدمات المتميزة التي تقدمها للزوار من جميع أنحاء العالم.',
                'category' => 'سفر وسياحة',
                'status' => 'Accept'
            ],
            [
                'title' => 'وصفة جديدة للطبخ الشرقي',
                'content' => 'يقدم الشيف المشهور وصفة جديدة للطبخ الشرقي تجمع بين النكهات التقليدية والمكونات الحديثة. تتميز هذه الوصفة بسهولة التحضير والطعم المميز الذي يناسب جميع أفراد العائلة.',
                'category' => 'طبخ',
                'status' => 'Accept'
            ],
            [
                'title' => 'تطورات سياسية مهمة على الساحة المحلية',
                'content' => 'شهدت الساحة السياسية المحلية تطورات مهمة خلال الأسبوع الماضي، حيث تم الإعلان عن مبادرات جديدة تهدف إلى تحسين الخدمات العامة. وقد رحبت مختلف الأطراف بهذه المبادرات ووصفتها بالإيجابية.',
                'category' => 'سياسة',
                'status' => 'Accept'
            ],
            [
                'title' => 'أحدث الأخبار من حول العالم',
                'content' => 'في نشرة الأخبار العامة لهذا اليوم، نستعرض أهم الأحداث التي شهدها العالم خلال الساعات الماضية. تشمل هذه الأحداث تطورات سياسية واقتصادية مهمة في عدة دول.',
                'category' => 'أخبار عامة',
                'status' => 'Accept'
            ]
        ];

        foreach ($newsData as $index => $data) {
            $category = $categories->where('name', $data['category'])->first();
            if ($category) {
                News::create([
                    'title' => $data['title'],
                    'content' => $data['content'],
                    'user_id' => $user->id,
                    'category_id' => $category->id,
                    'image' => $images[$index % count($images)],
                    'status' => $data['status'],
                    'views' => rand(50, 500),
                    'created_at' => now()->subDays(rand(1, 30)),
                    'updated_at' => now()->subDays(rand(0, 5))
                ]);
            }
        }

        // إنشاء المزيد من الأخبار العشوائية
        for ($i = 0; $i < 20; $i++) {
            $category = $categories->random();
            News::create([
                'title' => 'خبر إضافي رقم ' . ($i + 1) . ' في فئة ' . $category->name,
                'content' => 'هذا نص تجريبي لخبر إضافي يحتوي على معلومات متنوعة ومفيدة للقراء. يتضمن هذا المحتوى تفاصيل مهمة حول الموضوع المطروح ويقدم معلومات قيمة للمتابعين. النص يحتوي على فقرات متعددة تغطي جوانب مختلفة من الموضوع بشكل شامل ومفصل.',
                'user_id' => $user->id,
                'category_id' => $category->id,
                'image' => $images[array_rand($images)],
                'status' => 'Accept',
                'views' => rand(10, 800),
                'created_at' => now()->subDays(rand(1, 60)),
                'updated_at' => now()->subDays(rand(0, 10))
            ]);
        }
    }
}
